#/bin/sh

rpm=
literpm=

case $1 in
    *.*[13569].*)
	DEST="root@mail.shorewall.net:/srv/ftp/pub/shorewall/development/${1%.*}/shorewall-$1"
	;;
    *Beta*|*RC*)
	DEST="root@mail.shorewall.net:/srv/ftp/pub/shorewall/development/${1%.*}/shorewall-$1"
	rpm=shorewall-${1%-*}-0${1#*-}.noarch.rpm
	literpm=shorewall-lite-${1%-*}-0${1#*-}.noarch.rpm
	;;
    *)
	DEST="root@mail.shorewall.net:/srv/ftp/pub/shorewall/${1%.*}/shorewall-$1"
	;;
esac

[ $# -eq 1 ] || { echo "Usage: $(basename $0) <version>"; exit 2; }

[ -d errata ] || mkdir errata

echo "There are no known problems in Shorewall version $1" > known_problems.txt

if [ -f shorewall-lite-${1}/releasenotes.txt ]; then
    cat shorewall-${1}/releasenotes.txt shorewall-lite-${1}/releasenotes.txt > releasenotes.txt
else
    cat shorewall-${1}/releasenotes.txt > releasenotes.txt ||\
fi

scp -r errata known_problems.txt patch-$1 ${1}.* releasenotes.txt shorewall*${1}*.tgz* shorewall*${1}*.bz2* $rpm $literpm $DEST
