<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
                    
  <meta http-equiv="Content-Type"
 content="text/html; charset=windows-1252">
  <title>Shorewall Installation</title>
                                   
  <meta name="GENERATOR" content="Microsoft FrontPage 5.0">
                    
  <meta name="ProgId" content="FrontPage.Editor.Document">
</head>
  <body>
          
<table border="0" cellpadding="0" cellspacing="0"
 style="border-collapse: collapse;" bordercolor="#111111" width="100%"
 id="AutoNumber1" bgcolor="#3366ff" height="90">
             <tbody>
              <tr>
               <td width="100%">                                   
      <h1 align="center"><font color="#ffffff">Shorewall Installation and 
    Upgrade</font></h1>
               </td>
             </tr>
                    
  </tbody>     
</table>
          
<p align="center"><b>Before upgrading, be sure to review the <a
 href="upgrade_issues.htm">Upgrade Issues<br>
    </a></b></p>
       
<div align="left"><b>Before attempting installation, I strongly urge you
to read and print a copy of the       <a
 href="shorewall_quickstart_guide.htm">Shorewall QuickStart Guide</a>    
   for the configuration that most closely matches your own.</b><br>
    </div>
          
<p><font size="4"><b><a href="#Install_RPM">Install using RPM</a><br>
           <a href="#Install_Tarball">Install using tarball<br>
        </a><a href="#LRP">Install the .lrp</a><br>
           <a href="#Upgrade_RPM">Upgrade using RPM</a><br>
           <a href="#Upgrade_Tarball">Upgrade using tarball<br>
        </a><a href="#LRP_Upgrade">Upgrade the .lrp</a><br>
           <a href="#Config_Files">Configuring Shorewall</a><br>
           <a href="fallback.htm">Uninstall/Fallback</a></b></font></p>
          
<p><a name="Install_RPM"></a>To install Shorewall using the RPM:</p>
          
<p><b>If you have RedHat 7.2 and are running iptables version 1.2.3 (at a 
    shell  prompt, type "/sbin/iptables --version"), you must upgrade to version
    1.2.4  either from the <a
 href="http://www.redhat.com/support/errata/RHSA-2001-144.html">RedHat update 
     site</a> or from the <a href="errata.htm">Shorewall Errata page</a> before
     attempting to start Shorewall.</b></p>
          
<ul>
             <li>Install the RPM (rpm -ivh &lt;shorewall rpm&gt;).<br>
             <br>
             <b>Note1: </b>Some SuSE  users have encountered a problem whereby 
  rpm  reports  a    conflict with kernel &lt;= 2.2 even though a 2.4 kernel 
  is installed.  If this    happens, simply use the --nodeps option to rpm 
 (rpm -ivh --nodeps  &lt;shorewall    rpm&gt;.<br>
     <br>
         <b>Note2: </b>Beginning with Shorewall 1.4.0, Shorewall is dependent 
  on the iproute package. Unfortunately, some distributions call this package 
  iproute2 which will cause the installation of Shorewall to fail with the 
 diagnostic:<br>
         <br>
          error: failed dependencies:iproute is needed by  shorewall-1.4.x-1 
     <br>
         <br>
     This may be worked around by using the --nodeps option of rpm (rpm -ivh
  --nodeps &lt;shorewall rpm&gt;).<br>
         <br>
       </li>
             <li>Edit the <a href="#Config_Files"> configuration files</a>
 to  match   your configuration. <font color="#ff0000"><b>WARNING - YOU CAN
     <u>NOT</u>    SIMPLY INSTALL THE RPM  AND ISSUE A "shorewall start"
COMMAND.  SOME CONFIGURATION    IS REQUIRED BEFORE THE  FIREWALL WILL START.
IF YOU  ISSUE A "start" COMMAND    AND THE FIREWALL FAILS TO  START, YOUR
SYSTEM WILL NO LONGER ACCEPT ANY  NETWORK  TRAFFIC. IF THIS HAPPENS,  ISSUE
A "shorewall  clear" COMMAND TO  RESTORE NETWORK  CONNECTIVITY.</b></font></li>
             <li>Start the firewall by typing "shorewall start"</li>
          
</ul>
          
<p><a name="Install_Tarball"></a>To     install Shorewall using the tarball 
    and install     script: </p>
          
<ul>
             <li>unpack the tarball (tar -zxf shorewall-x.y.z.tgz).</li>
             <li>cd to the shorewall directory (the version is encoded in 
the               directory name as in "shorewall-1.1.10").</li>
             <li>If you are using <a
 href="http://www.caldera.com/openstore/openlinux/">Caldera</a>, <a
 href="http://www.redhat.com">RedHat</a>,           <a
 href="http://www.linux-mandrake.com">Mandrake</a>, <a
 href="http://www.corel.com">Corel</a>,           <a
 href="http://www.slackware.com/">Slackware</a> or           <a
 href="http://www.debian.org">Debian</a>             then type "./install.sh"</li>
             <li>If you are using <a href="http://www.suse.com">SuSe</a>
then   type       "./install.sh /etc/init.d"</li>
             <li>If your distribution has directory             /etc/rc.d/init.d 
   or  /etc/init.d then type             "./install.sh"</li>
             <li>For other distributions, determine where your          
  distribution    installs init scripts and type             "./install.sh
 &lt;init script   directory&gt;</li>
             <li>Edit the <a href="#Config_Files"> configuration files</a>
 to  match   your configuration.</li>
             <li>Start the firewall by typing "shorewall             start"</li>
             <li>If the install script was unable to configure Shorewall
to  be  started   automatically at boot,             see <a
 href="starting_and_stopping_shorewall.htm">these             instructions</a>.</li>
          
</ul>
          
<p><a name="LRP"></a>To install my version of Shorewall on a fresh Bering 
   disk, simply replace the "shorwall.lrp" file on the image with the file
  that  you downloaded. See the <a href="two-interface.htm">two-interface
QuickStart   Guide</a> for information about further steps required.</p>
          
<p><a name="Upgrade_RPM"></a>If you already have the Shorewall RPM installed 
    and are upgrading to a new version:</p>
          
<p>If you are upgrading from a 1.2 version of Shorewall to a 1.4 version or
and you  have entries in the /etc/shorewall/hosts file then please check 
your  /etc/shorewall/interfaces file to be sure that it contains an entry 
   for each  interface mentioned in the hosts file. Also, there are certain 
  1.2 rule forms  that are no longer supported under 1.4 (you must use the
  new 1.4 syntax). See <a href="errata.htm#Upgrade">the upgrade issues </a>for
  details.</p>
          
<ul>
             <li>Upgrade the RPM (rpm -Uvh &lt;shorewall rpm file&gt;) <b>Note: 
       </b>If  you     are installing version 1.2.0 and have one of the 1.2.0 
   Beta RPMs installed,     you must use the "--oldpackage" option to rpm 
(e.g.,   "rpm     -Uvh --oldpackage shorewall-1.2-0.noarch.rpm").        
                 
    <p>   <b>Note1: </b>Some SuSE users have encountered a problem whereby 
    rpm reports a    conflict with kernel &lt;= 2.2 even though a 2.4 kernel 
   is installed. If this    happens, simply use the --nodeps option to rpm
  (rpm   -Uvh --nodeps &lt;shorewall    rpm&gt;).<br>
         <br>
         <b>Note3: </b>Beginning with Shorewall 1.4.0, Shorewall is dependent
  on the iproute package. Unfortunately, some distributions call this package
  iproute2 which will cause the upgrade of Shorewall to fail with the diagnostic:<br>
        <br>
           error: failed dependencies:iproute is needed by  shorewall-1.4.0-1 
      <br>
        <br>
      This may be worked around by using the --nodeps option of rpm (rpm
-Uvh   --nodeps &lt;shorewall rpm&gt;). </p>
            </li>
            <li>See if there are any incompatibilities between your configuration 
   and the    new Shorewall version (type "shorewall check") and correct as
  necessary.</li>
             <li>Restart the firewall (shorewall restart).</li>
          
</ul>
          
<p><a name="Upgrade_Tarball"></a>If you already have Shorewall installed
and are upgrading to a new version using the tarball:</p>
          
<p>If you are upgrading from a 1.2 version of Shorewall to a 1.4 version
and you  have entries in the /etc/shorewall/hosts file then please check
your  /etc/shorewall/interfaces file to be sure that it contains an entry
for each  interface mentioned in the hosts file.  Also, there are certain
1.2 rule  forms that are no longer supported under 1.4 (you must use the
new 1.4 syntax).  See <a href="errata.htm#Upgrade">the upgrade issues</a>
for details. </p>
          
<ul>
         <li>unpack the tarball (tar -zxf shorewall-x.y.z.tgz).</li>
             <li>cd to the shorewall directory (the version is encoded in 
the               directory name as in "shorewall-3.0.1").</li>
             <li>If you are using <a
 href="http://www.caldera.com/openstore/openlinux/">Caldera</a>, <a
 href="http://www.redhat.com">RedHat</a>,           <a
 href="http://www.linux-mandrake.com">Mandrake</a>, <a
 href="http://www.corel.com">Corel</a>,           <a
 href="http://www.slackware.com/">Slackware</a> or           <a
 href="http://www.debian.org">Debian</a>             then type "./install.sh"</li>
             <li>If you are using<a href="http://www.suse.com"> SuSe</a>
then   type       "./install.sh /etc/init.d"</li>
             <li>If your distribution has directory             /etc/rc.d/init.d 
   or  /etc/init.d then type             "./install.sh"</li>
             <li>For other distributions, determine where your          
  distribution    installs init scripts and type             "./install.sh
 &lt;init script   directory&gt;</li>
             <li>See if there are any incompatibilities between your configuration 
   and the    new Shorewall version (type "shorewall check") and correct as
  necessary.</li>
             <li>Restart the firewall by typing "shorewall restart"</li>
          
</ul>
                 <a name="LRP_Upgrade"></a>If you already have a running
Bering    installation and wish to upgrade to a later version of Shorewall:<br>
        <br>
            <b>UNDER CONSTRUCTION...</b><br>
          
<h3><a name="Config_Files"></a>Configuring Shorewall</h3>
          
<p>You will need to edit some or all of the configuration files to match your
 setup. In most cases, the <a href="shorewall_quickstart_guide.htm">Shorewall 
    QuickStart Guides</a> contain all of the information you need.</p>
          
<ul>
          
</ul>
          
<p><font size="2">Updated 4/8/2003 - <a href="support.htm">Tom Eastep</a> 
    </font></p>
          
<p><a href="copyright.htm"><font size="2">Copyright</font>   © <font
 size="2">2001, 2002, 2003 Thomas M. Eastep.</font></a><br>
  </p>
  <br>
 <br>
</body>
</html>
